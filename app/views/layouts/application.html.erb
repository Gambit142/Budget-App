<!DOCTYPE html>
<html>
  <head>
    <title>BudgetApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Italianno&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Italiana&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/29d7bf5b00.js" crossorigin="anonymous"></script>
  </head>

  <body>
    <div>
      <% flash.each do |name, msg| -%>
        <%= content_tag :span, msg, class: name %>
      <% end -%>
    </div>
    <%= yield %>
    <script>
      const FILEUPLOADER = document.querySelector('#add_category_icon');
      FILEUPLOADER.addEventListener("change", (e) => {
        document.querySelector('.file-upload-label > span').innerText = e.target.files[0].name;
        document.querySelector('.file-upload-label > p').style.backgroundColor = "green";
        document.querySelector('.file-upload-label > p').innerText = "Selected âœ“"
      })

      document.querySelector('.reg-cat').addEventListener('click', () => {
        if ((document.querySelector('.file-upload-label > span').innerText == 'No File Chosen') && 
        (document.querySelector('#add_category_name').value !== '')) {
          alert('select an icon for this category!')
        }
      })
    </script>
  </body>
</html>
